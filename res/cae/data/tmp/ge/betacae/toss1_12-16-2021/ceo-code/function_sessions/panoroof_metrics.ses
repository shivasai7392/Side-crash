//#!python
# PYTHON script
import meta
from meta import *

def main():

	print("---PANOROOF ANALYSIS")
	print("")

if __name__ == '__main__':
	main()
//#!EOF

window active "${d3plot_data}"
view fo3 ${follow_nodes}
identify reset
identify angle ${panoroof_struck_angle_nodes}
window active "${panoroof_metrics}"
xyplot plotactive "${panoroof_metrics}" 3
xyplot frommodel angles "${panoroof_metrics}" 1 Angle Time all all dlabel "Displacements"
xyplot curve set name "${panoroof_metrics}" "${LAST_CURVE_ID}" "Panoroof struck side lifter angle"
xyplot curve fillvar INITIAL_ANGLE `w[${panoroof_metrics}]c${LAST_CURVE_ID}.y[x=0]`
xyplot curve rfunction newshift down "${panoroof_metrics}" ${LAST_CURVE_ID} ${INITIAL_ANGLE}
xyplot plotdeactive "${panoroof_metrics}" all

window active "${d3plot_data}"
view fo3 ${follow_nodes}
identify reset
identify angle ${panoroof_unstruck_angle_nodes}
window active "${panoroof_metrics}"
xyplot plotactive "${panoroof_metrics}" 4
xyplot frommodel angles "${panoroof_metrics}" 1 Angle Time all all dlabel "Displacements"
xyplot curve set name "${panoroof_metrics}" "${LAST_CURVE_ID}" "Panoroof unstruck side lifter angle"
xyplot curve fillvar INITIAL_ANGLE `w[${panoroof_metrics}]c${LAST_CURVE_ID}.y[x=0]`
xyplot curve rfunction newshift down "${panoroof_metrics}" ${LAST_CURVE_ID} ${INITIAL_ANGLE}
xyplot plotdeactive "${panoroof_metrics}" all

window active "${d3plot_data}"
view fo3 ${follow_nodes}
identify reset
identify distance pp "${panoroof_unstruck_part}" "${panoroof_struck_part}"
window active "${attack_window}"
xyplot plotactive "${attack_window}" 5
xyplot frommodel distances "${attack_window}" 1 Total_distance Time all all dlabel "Displacements"
xyplot curve fillvar INITIAL_ANGLE `w[${panoroof_metrics}]c${LAST_CURVE_ID}.y[x=0]`
xyplot curve rfunction newshift down "${panoroof_metrics}" ${LAST_CURVE_ID} ${INITIAL_ANGLE}
xyplot curve set name "${attack_window}" "${LAST_CURVE_ID}" "Struck Extrusion to Unstruck Extrusion distance"
xyplot plotdeactive "${attack_window}" all