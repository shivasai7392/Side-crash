$-- SIDE CRASH NODOUT GOODNESS -- ACCEL [G] / VELO [mm/s] / DISP [mm] / INTRUSION [mm]
$
$ opt var add b0 opt var add b0 "binout*"
$ opt var add pA opt var add pA "${PWD}/${b0}"
$ opt var add attack_window "Rear Door - CAE Displacement"
$ opt var add window_id 3
$ opt var string follow_nodes 7,8,9
$ opt var string dem_nodes "39039152"

//#!python
# PYTHON script
import meta
from meta import *

def main():

	print("---CAE NODE GENERAL CRASH ANALYSIS")
	print("")

if __name__ == '__main__':
	main()
//#!EOF

window active  "${attack_window}"
xyplot plotdeactive "${attack_window}" all
xyplot plotactive "${attack_window}" "${window_id}"
xyplot curve visible not "${attack_window}" all
xyplot read lsdyna "${attack_window}" "${pA}" nodout-Node ${dem_nodes} X_acceleration_(xa),Y_acceleration_(ya),Z_acceleration_(za)
xyplot curve set assign yaxis "${attack_window}" "visible 0
xyplot curve set linewidth "${attack_window}" visible 3
xyplot curve set color "${attack_window}" visible "DarkGray"
xyplot curve rfunction newscale y "${attack_window}" visible 101.97162100000001
xyplot curve visible not "${attack_window}" all
xyplot read lsdyna "${attack_window}" "${pA}" nodout-Node ${dem_nodes} X_velocity_(xv),Y_velocity_(yv),Z_velocity_(zv)
xyplot curve set assign yaxis "${attack_window}" "visible 1
xyplot curve set linewidth "${attack_window}" visible 3
xyplot curve set color "${attack_window}" visible "LightBlue"
xyplot curve visible not "${attack_window}" all
xyplot model 1 lsdyna fo3 ${follow_nodes}
xyplot read lsdyna "${attack_window}" "${pA}" nodout-Node ${dem_nodes} X_displacement_(xd),Y_displacement_(yd),Z_displacement_(zd)
xyplot curve set assign yaxis "${attack_window}" visible 2
xyplot curve set linewidth "${attack_window}" visible 3
xyplot curve set color "${attack_window}" visible "MediumPurple"
xyplot curve visible not "${attack_window}" all
xyplot read lsdyna "${attack_window}" "${pA}" nodout-Node ${dem_nodes} Follow_node_X_displacement_(fxd),Follow_node_Y_displacement_(fyd),Follow_node_Z_displacement_(fzd)
xyplot curve set assign yaxis "${attack_window}" visible 2
xyplot curve set linewidth "${attack_window}" visible 3
xyplot curve set color "${attack_window}" visible "Pink"
xyplot curve visible not "${attack_window}" all
xyplot plotdeactive "${attack_window}" "${window_id}"

window active "${attack_window}"
xyplot plotactive "${attack_window}" all
xyplot curve visible not "${attack_window}" all
xyplot curve deselect "${attack_window}" all
xyplot plotdeactive "${attack_window}" all
window active none